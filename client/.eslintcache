[{"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\index.js":"1","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\Components\\target.js":"2","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\Components\\addcomment.js":"3","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\photopage.js":"4","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\gallery.js":"5","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\login.js":"6","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\galleries.js":"7","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\auth0secureapi.js":"8","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\photo.js":"9","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\authroutes.js":"10","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\newgallery.js":"11","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\newphotopage.js":"12","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\reportWebVitals.js":"13","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\galleries_nologin.js":"14","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\navbar.js":"15","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\App.js":"16","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\home.js":"17"},{"size":850,"mtime":1607959522097,"results":"18","hashOfConfig":"19"},{"size":992,"mtime":1608306293009,"results":"20","hashOfConfig":"19"},{"size":2853,"mtime":1607351702893,"results":"21","hashOfConfig":"19"},{"size":9284,"mtime":1608306784556,"results":"22","hashOfConfig":"19"},{"size":3369,"mtime":1608393340829,"results":"23","hashOfConfig":"19"},{"size":592,"mtime":1607958282683,"results":"24","hashOfConfig":"19"},{"size":2849,"mtime":1608390142797,"results":"25","hashOfConfig":"19"},{"size":914,"mtime":1608133496862,"results":"26","hashOfConfig":"19"},{"size":910,"mtime":1608389087295,"results":"27","hashOfConfig":"19"},{"size":1918,"mtime":1608392902666,"results":"28","hashOfConfig":"19"},{"size":1969,"mtime":1608056433094,"results":"29","hashOfConfig":"19"},{"size":1419,"mtime":1608056953940,"results":"30","hashOfConfig":"19"},{"size":375,"mtime":1607351702899,"results":"31","hashOfConfig":"19"},{"size":1975,"mtime":1607351702908,"results":"32","hashOfConfig":"19"},{"size":1384,"mtime":1608309355809,"results":"33","hashOfConfig":"19"},{"size":484,"mtime":1607351702912,"results":"34","hashOfConfig":"19"},{"size":2289,"mtime":1608393234638,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"1jjrl6u",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"67","messages":"68","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"38"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\index.js",[],["74","75"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\Components\\target.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\Components\\addcomment.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\photopage.js",["76","77"],"import React, { useState, useEffect, useRef } from 'react';\r\nimport styles from './photopage.module.css';\r\nimport Rating from '@material-ui/lab/Rating';\r\nimport Box from '@material-ui/core/Box';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport auth0SecureAPI from './auth0secureapi';\r\nimport { useNavigate } from '@reach/router';\r\nimport AddComment from '../Components/addcomment';\r\nimport Target from \"../Components/target\";\r\n\r\n\r\nconst PhotoPage = props => {\r\n    const { user, isLoading, getAccessTokenSilently } = useAuth0();\r\n    const { id } = props;\r\n    const [value, setValue] = useState(0)\r\n    const [photo, setPhoto] = useState({});\r\n    const [gallery, setGallery] = useState({});\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [commentloc, setCommentLoc] = useState(null);\r\n    const [activecomment, setActiveComment] = useState(null);\r\n    const [diam, setDiam] = useState(10);\r\n    const [selection, setSelection] = useState({ xloc: 0, yloc: 0, diam: 10, hidden: true });\r\n\r\n    const image = useRef(null);\r\n    const imgcontainer = useRef(null);\r\n    const Navigate = useNavigate();\r\n    \r\n    let imagebox;\r\n\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            auth0SecureAPI(getAccessTokenSilently, \"photos/\" + id)\r\n                .then(res => {\r\n                    console.log(res.photo[0])\r\n                    setPhoto({ ...res.photo[0], gallery_name: res.gallery_name, gallery_id: res._id });\r\n                    setGallery( {gallery_name: res.gallery_name, gallery_id: res._id})\r\n                    for (const rating of res.photo[0].ratings) {\r\n                        console.log(\"looking at\", rating.user_id);\r\n                        if (rating.user_id === user.sub) {\r\n                            setValue(rating.rating);\r\n                            break;\r\n                        }\r\n                    }\r\n                })\r\n                .catch(err => console.log(err));\r\n                \r\n        }\r\n        console.log(\"Ran use effect\");\r\n    }, [isLoading]);\r\n\r\n    const clickEdit = () => {\r\n        if (editMode) {\r\n            auth0SecureAPI(getAccessTokenSilently, \"photos/update/\" + id, photo)\r\n                .then(res => {\r\n                    setPhoto({...res.photo[res.photo.length - 1]});\r\n                    setGallery({gallery_name: res.gallery_name, gallery_id: res._id})\r\n                })\r\n                .catch(err => console.log(err));\r\n        }\r\n        setEditMode(!editMode);\r\n    }\r\n\r\n    const mouseUp = (event) => {\r\n        if (!selection.hidden) {\r\n            imagebox = (image.current.getBoundingClientRect());\r\n            let xpct = Math.round((selection.xloc - imagebox.left) / imagebox.width * 100);\r\n            let ypct = Math.round((selection.yloc - imagebox.top) / imagebox.height * 100);\r\n            let diampct = diam / imagebox.width * 100;\r\n            setCommentLoc({\r\n                ...selection,\r\n                xpct: xpct,\r\n                ypct: ypct,\r\n                diam: diam,\r\n                diampct: diampct\r\n            })\r\n            setActiveComment(null);\r\n            setSelection({ xloc: 0, yloc: 0, diam: 10, hidden: true });\r\n        }\r\n    }\r\n\r\n    const mouseMove = (event) => {\r\n        imagebox = (image.current.getBoundingClientRect());\r\n        if (!selection.hidden) {\r\n            event.preventDefault();\r\n            const selectiondiam = Math.max(10, 2 * Math.sqrt(((event.clientX - imagebox.left) - selection.xloc) ** 2 + ((event.clientY - imagebox.top) - selection.yloc) ** 2));\r\n            setDiam(selectiondiam);\r\n        }\r\n    }\r\n\r\n    const mouseDown = (event) => {\r\n        imagebox = (image.current.getBoundingClientRect());\r\n        const new_selection = {\r\n            xloc: event.clientX - imagebox.left,\r\n            yloc: event.clientY - imagebox.top,\r\n            diam: diam,\r\n            hidden: false\r\n        };\r\n        setSelection(new_selection);\r\n        setDiam(10);\r\n        setActiveComment(null);\r\n    }\r\n\r\n    const setMyRating = (newrating) => {\r\n        let found = false;\r\n        let temp_photo\r\n        if (!photo.ratings || !photo.ratings.length) {\r\n            temp_photo = {\r\n                ...photo,\r\n                ratings: [{\r\n                    rating: newrating,\r\n                    user_id: user.sub,\r\n                    user_name: user.name\r\n                }]\r\n            }\r\n        } else {\r\n            temp_photo = {\r\n                ...photo,\r\n                ratings: photo.ratings.map(rating => {\r\n                    if (rating.user_id === user.sub) {\r\n                        found = true;\r\n                        return {\r\n                            ...rating,\r\n                            rating: newrating,\r\n                            user_name: user.name\r\n                        }\r\n                    } else {\r\n                        return rating;\r\n                    }\r\n                })\r\n            }\r\n            if (!found) {\r\n                temp_photo = {\r\n                    ...temp_photo,\r\n                    ratings: [...temp_photo.ratings, {\r\n                        rating: newrating,\r\n                        user_id: user.sub,\r\n                        user_name: user.name\r\n                    }]\r\n                }\r\n            }\r\n        }\r\n        setPhoto(temp_photo);\r\n        auth0SecureAPI(getAccessTokenSilently, \"photos/update/\" + id, temp_photo)\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div ref={imgcontainer} id=\"img_container\" name=\"imagecontainer\" onMouseDown={mouseDown} onMouseUp={mouseUp} onMouseMove={mouseMove}>\r\n                <Target key=\"selector\" xloc={selection.xloc} yloc={selection.yloc} diam={diam} active={true} hidden={selection.hidden} />\r\n                <img onLoad={() => setActiveComment(27)} src={photo.path} ref={image} alt=\"User submitted with comments\" />\r\n                {photo.comments && photo.comments.map((comment, index) => {\r\n                    imagebox = (image.current.getBoundingClientRect());\r\n                    const xloc = (comment.x / 100 * imagebox.width) + imagebox.left;\r\n                    const yloc = (comment.y / 100 * imagebox.height) + imagebox.top;\r\n                    console.log(comment.x, comment.y, comment.diam)\r\n                    const showdiam = (comment.diam / 100 * imagebox.width);\r\n                    const clickTarget = () => {\r\n                        if (activecomment === comment._id) {\r\n                            setActiveComment(null)\r\n                        } else {\r\n                            setActiveComment(comment._id)\r\n                        }\r\n                    }\r\n                    return (\r\n                        <Target key={comment._id} onClick={(event) => {\r\n                            event.stopPropagation();\r\n                            clickTarget();\r\n                        }} xloc={xloc} yloc={yloc} diam={showdiam} active={(activecomment === comment._id)} hidden={false} text={index + 1} />\r\n                    )\r\n                })}\r\n            </div>\r\n            {//NEED TO RE-WRITE \r\n            }\r\n            <div className=\"star\">\r\n                <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n                    <Rating\r\n                        name=\"simple-controlled\"\r\n                        value={value}\r\n                        onChange={(event, newValue) => {\r\n                            setValue(newValue);\r\n                            setMyRating(newValue);\r\n                        }}\r\n                    />\r\n                </Box>\r\n            </div>\r\n            {//END RE-WRITE \r\n            }\r\n            <button onClick={clickEdit}>{editMode ? \"Save\" : \"Edit\"}</button>\r\n            <form className={!editMode ? \" \" + styles.invisible : styles.floating}>\r\n                <input type=\"text\" name=\"path\" value={photo.path} onChange={(e) => setPhoto({ ...photo, path: e.target.value })} />\r\n            </form>\r\n            <AddComment comment={activecomment} setActiveComment={setActiveComment} commentloc={commentloc} setCommentLoc={setCommentLoc} photo={photo} setPhoto={setPhoto} id={id} />\r\n            <h5>Ratings</h5>\r\n            { photo.ratings && photo.ratings.map((rating) => {\r\n                return (\r\n                    <p>{rating.user_name} - {rating.rating}</p>\r\n                )\r\n            })}\r\n            <h5>Comments</h5>\r\n            { photo.comments && photo.comments.map((comment, index) => {\r\n                const clickComment = () => {\r\n                    if (activecomment === comment._id) {\r\n                        setActiveComment(null)\r\n                    } else {\r\n                        setActiveComment(comment._id)\r\n                    }\r\n                }\r\n                return (\r\n                    <>\r\n                        <p onClick={clickComment} className={(activecomment === comment._id) ? styles.active : styles.regular}>{`${index + 1}: ${comment.user_name} (${comment.x}, ${comment.y}) - ${comment.comment}`}</p>\r\n                    </>\r\n                )\r\n            })}\r\n            <button onClick={() => Navigate(\"/gallery/\" + photo.gallery_id)}>Go back to gallery!</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PhotoPage;","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\gallery.js",["78","79"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\login.js",["80"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\galleries.js",["81","82","83"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\auth0secureapi.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\photo.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\authroutes.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\newgallery.js",["84"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\newphotopage.js",["85","86"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\reportWebVitals.js",[],["87","88"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\galleries_nologin.js",["89","90"],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\navbar.js",["91","92"],"import { navigate } from '@reach/router';\r\nimport React from 'react';\r\nimport { useNavigate } from '@reach/router'\r\n\r\nconst UserBar = props => {\r\n    const {name, picture, sub } = props.user;\r\n    const { navpath } = props;\r\n    const Navigate = useNavigate();\r\n\r\n    const style = {\r\n        maxWidth: \"40px\", \r\n        maxHeight: \"40px\",\r\n        border: \"1px solid darkgrey\",\r\n        borderRadius: \"20px\"\r\n    }\r\n        \r\n\r\n    return (\r\n        <div>\r\n            <div style={{display: \"inline-block\", width: \"700px\",  textAlign: \"left\"}}>\r\n                {console.log(\"Navpath: \", navpath)}\r\n                {navpath.length && navpath.map((step, index) => {\r\n                    return(\r\n                        <>\r\n                            <a href={step.link} onClick={(e) => { e.preventDefault(); Navigate(step.link)}}>{step.name}</a> \r\n                            { index < navpath.length - 1 ? <b>{` -> `}</b> : \"\"}\r\n                        </>\r\n                    )\r\n                }) }\r\n            </div>\r\n            <div style={{display: \"inline-block\", width: \"270px\", textAlign: \"right\"}}>\r\n                <h3>{name}</h3>\r\n                <img style={style} alt=\"User photo\" src={picture} />\r\n                <button onClick={() => Navigate(\"/user/\" + sub)}>Edit User</button>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default UserBar;","C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\App.js",[],"C:\\Users\\mrson\\Coding Dojo\\photocomments\\code\\client\\src\\views\\home.js",["93","94","95","96"],{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","replacedBy":"100"},{"ruleId":"101","severity":1,"message":"102","line":17,"column":12,"nodeType":"103","messageId":"104","endLine":17,"endColumn":19},{"ruleId":"105","severity":1,"message":"106","line":49,"column":8,"nodeType":"107","endLine":49,"endColumn":19,"suggestions":"108"},{"ruleId":"101","severity":1,"message":"109","line":11,"column":19,"nodeType":"103","messageId":"104","endLine":11,"endColumn":34},{"ruleId":"105","severity":1,"message":"110","line":37,"column":7,"nodeType":"107","endLine":37,"endColumn":18,"suggestions":"111"},{"ruleId":"101","severity":1,"message":"112","line":2,"column":9,"nodeType":"103","messageId":"104","endLine":2,"endColumn":13},{"ruleId":"101","severity":1,"message":"109","line":9,"column":19,"nodeType":"103","messageId":"104","endLine":9,"endColumn":34},{"ruleId":"105","severity":1,"message":"113","line":34,"column":7,"nodeType":"107","endLine":34,"endColumn":18,"suggestions":"114"},{"ruleId":"115","severity":1,"message":"116","line":65,"column":43,"nodeType":"117","messageId":"118","endLine":65,"endColumn":49},{"ruleId":"101","severity":1,"message":"119","line":5,"column":8,"nodeType":"103","messageId":"104","endLine":5,"endColumn":13},{"ruleId":"101","severity":1,"message":"120","line":1,"column":38,"nodeType":"103","messageId":"104","endLine":1,"endColumn":44},{"ruleId":"105","severity":1,"message":"121","line":20,"column":7,"nodeType":"107","endLine":20,"endColumn":18,"suggestions":"122"},{"ruleId":"97","replacedBy":"123"},{"ruleId":"99","replacedBy":"124"},{"ruleId":"101","severity":1,"message":"125","line":6,"column":10,"nodeType":"103","messageId":"104","endLine":6,"endColumn":18},{"ruleId":"101","severity":1,"message":"126","line":7,"column":8,"nodeType":"103","messageId":"104","endLine":7,"endColumn":22},{"ruleId":"101","severity":1,"message":"127","line":1,"column":10,"nodeType":"103","messageId":"104","endLine":1,"endColumn":18},{"ruleId":"128","severity":1,"message":"129","line":33,"column":17,"nodeType":"130","endLine":33,"endColumn":69},{"ruleId":"101","severity":1,"message":"131","line":8,"column":19,"nodeType":"103","messageId":"104","endLine":8,"endColumn":28},{"ruleId":"101","severity":1,"message":"132","line":15,"column":13,"nodeType":"103","messageId":"104","endLine":15,"endColumn":27},{"ruleId":"105","severity":1,"message":"133","line":24,"column":7,"nodeType":"107","endLine":24,"endColumn":9,"suggestions":"134"},{"ruleId":"115","severity":1,"message":"116","line":54,"column":43,"nodeType":"117","messageId":"118","endLine":54,"endColumn":49},"no-native-reassign",["135"],"no-negated-in-lhs",["136"],"no-unused-vars","'gallery' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getAccessTokenSilently', 'id', and 'user.sub'. Either include them or remove the dependency array.","ArrayExpression",["137"],"'isAuthenticated' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'getAccessTokenSilently', 'id', 'setNavPath', and 'user.sub'. Either include them or remove the dependency array.",["138"],"'Link' is defined but never used.","React Hook useEffect has missing dependencies: 'galleries', 'getAccessTokenSilently', 'setNavPath', and 'user'. Either include them or remove the dependency array.",["139"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ReturnStatement","expectedReturnValue","'Photo' is defined but never used.","'useRef' is defined but never used.","React Hook useEffect has a missing dependency: 'togallery'. Either include it or remove the dependency array.",["140"],["135"],["136"],"'useAuth0' is defined but never used.","'auth0SecureAPI' is defined but never used.","'navigate' is defined but never used.","jsx-a11y/img-redundant-alt","Redundant alt attribute. Screen-readers already announce `img` tags as an image. You don’t need to use the words `image`, `photo,` or `picture` (or any specified custom words) in the alt prop.","JSXOpeningElement","'isLoading' is assigned a value but never used.","'temp_galleries' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'galleries', 'getAccessTokenSilently', 'setNavPath', and 'user.sub'. Either include them or remove the dependency array.",["141"],"no-global-assign","no-unsafe-negation",{"desc":"142","fix":"143"},{"desc":"144","fix":"145"},{"desc":"146","fix":"147"},{"desc":"148","fix":"149"},{"desc":"150","fix":"151"},"Update the dependencies array to be: [getAccessTokenSilently, id, isLoading, user.sub]",{"range":"152","text":"153"},"Update the dependencies array to be: [getAccessTokenSilently, id, isLoading, setNavPath, user.sub]",{"range":"154","text":"155"},"Update the dependencies array to be: [galleries, getAccessTokenSilently, isLoading, setNavPath, user]",{"range":"156","text":"157"},"Update the dependencies array to be: [isLoading, togallery]",{"range":"158","text":"159"},"Update the dependencies array to be: [galleries, getAccessTokenSilently, setNavPath, user.sub]",{"range":"160","text":"161"},[2022,2033],"[getAccessTokenSilently, id, isLoading, user.sub]",[1239,1250],"[getAccessTokenSilently, id, isLoading, setNavPath, user.sub]",[1229,1240],"[galleries, getAccessTokenSilently, isLoading, setNavPath, user]",[635,646],"[isLoading, togallery]",[852,854],"[galleries, getAccessTokenSilently, setNavPath, user.sub]"]